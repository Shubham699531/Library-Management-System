<app-student-header></app-student-header>
<div class="container">
  <div class="row">
    <div class="col-xs-1"></div>
    <div class="col-xs-10">
      <h3>Book You Want To Read: &nbsp; </h3><br>
      <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="search()" class="form-control" placeholder="Search by name, author or genre">
      <div>{{message}}</div>
    </div>
    <div class="col-xs-1"></div>
  </div>
  <hr>
</div>

<div>
  <table class="table table-bordered">
    <tr><th colspan="1"></th><th colspan="4"><h1>Popular Books</h1></th><th colspan="1"></th></tr>
      <tr><th>Book Id</th><th>Name</th><th>Genre</th><th>Author</th><th>Brief Description</th><th>Count</th><th></th></tr>
      <tr *ngFor="let b of popularityObjects | slice:0:3">
        <td>{{b.book.bookId}}</td>
        <td>{{b.book.bookName}}</td>
        <td>{{b.book.bookGenre}}</td>
        <td>{{b.book.bookAuthor}}</td>
        <td>{{b.book.bookDescription}}</td>
        <td><strong>{{(b.count)*1000}}</strong> people have taken this book so far...</td>
        <td><button class="btn btn-success" (click)="onButtonClick($event, b.book)" [disabled]=!isAStudent>Get This Book</button></td>
      </tr>
      <hr>
      <!-- <tr>
        <th colspan="9" *ngIf=noStudentHasTakenThisBook><h2>{{message}}</h2></th>
      </tr> -->
    </table>
</div>

<div>
  <table class="table table-bordered">
    <tr><th colspan="5"></th><th colspan="2"><h1>List of Books</h1></th><th colspan="3"></th></tr>
      <tr><th>Book Id</th><th>Name</th><th>Genre</th><th>Author</th><th>Price</th><th>ISBN</th><th>Brief Description</th><th>Copies Available</th><th>Status</th><th></th></tr>
      <tr *ngFor="let b of books">
        <td>{{b.bookId}}</td>
        <td>{{b.bookName}}</td>
        <td>{{b.bookGenre}}</td>
        <td>{{b.bookAuthor}}</td>
        <td>{{b.bookPrice}}</td>
        <td>{{b.isbn}}</td>
        <td>{{b.bookDescription}}</td>
        <td>{{b.noOfCopies}}</td>
        <td>{{b.bookStatus}}</td>
        <td><button class="btn btn-success" (click)="onButtonClick($event, b)" [disabled]=!isAStudent>Get This Book</button></td>
      </tr>
      <hr>
      <!-- <tr>
        <th colspan="9" *ngIf=noStudentHasTakenThisBook><h2>{{message}}</h2></th>
      </tr> -->
    </table>
</div>

